schema_version = "3"

[service]

[service.socket]
enabled = true
path = "/run/build-service.sock"
group = "users"
mode = "0660"

[service.http]
enabled = false
listen_addr = "0.0.0.0:8080"

[service.http.auth]
type = "bearer"
required = false
# tokens = ["<secret token>"]

[service.http.tls]
enabled = false
# cert_path = "/etc/build-service/tls/server.crt"
# key_path = "/etc/build-service/tls/server.key"
# ca_path = "/etc/build-service/tls/ca.crt"

[build]
workspace_root = "/var/lib/build-service/workspaces"
# optional: run builds as this user/group (default: service process user)
# run_as_user = "build"
# run_as_group = "build"
max_upload_bytes = 134217728
max_extracted_bytes = 1342177280

[build.commands]
make = "/usr/bin/make"

[build.timeouts]
default_sec = 600
max_sec = 1800

[build.environment]
allow = [
    "PATH",
    "HOME",
    "USER",
    "LOGNAME",
    "LANG",
    "CC",
    "CXX",
    "CFLAGS",
    "CXXFLAGS",
    "LDFLAGS",
    "PKG_CONFIG_PATH",
    "MAKEFLAGS",
]

[artifacts]
storage_root = "/var/lib/build-service/artifacts"
# ttl_sec = 86400
# gc_interval_sec = 3600
# max_bytes = 1073741824

[logging]
level = "info"
directory = "/var/log/build-service"
max_bytes = 104857600
max_files = 5
console = false
