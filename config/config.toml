schema_version = "1"

[service]
socket_path = "/run/build-service.sock"
socket_group = "users"
socket_mode = "0660"

[build]
# The workspace root is expanded as <workspace_root>/<username>/workspace.
workspace_root = "/home"

[build.path_mapping]
# Template placeholders: {user}, {workspace_root}
# Defaults keep host and container paths identical.
# Example mapping when the container sees /home/<user> but host uses /home/<user>/workspace:
# container_template = "/home/{user}"
# host_template = "/home/{user}/workspace"
container_template = "{workspace_root}/{user}/workspace"
host_template = "{workspace_root}/{user}/workspace"

[build.commands]
make = "/usr/bin/make"

[build.timeouts]
default_sec = 600
max_sec = 1800

[build.environment]
allow = [
    "PATH",
    "HOME",
    "USER",
    "LANG",
    "CC",
    "CXX",
    "CFLAGS",
    "CXXFLAGS",
    "LDFLAGS",
    "PKG_CONFIG_PATH",
    "MAKEFLAGS",
]

[logging]
level = "info"
directory = "/var/log/build-service"
max_bytes = 104857600
max_files = 5
console = false
